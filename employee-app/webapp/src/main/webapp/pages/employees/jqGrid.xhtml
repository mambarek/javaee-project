<ui:composition
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
        xmlns:f="http://xmlns.jcp.org/jsf/core"
        xmlns:h="http://xmlns.jcp.org/jsf/html"
        xmlns:jsf="http://xmlns.jcp.org/jsf"
        xmlns:p="http://primefaces.org/ui"
        xmlns:pe="http://xmlns.jcp.org/jsf/composite/prime-empl">

    <div class="card" >
        <div class="card-header corp-block-header">
            #{employeeMsg['employee.table.title']} - jqGrid
        </div>
        <div class="card-block" style="padding: 0" id="gridContainer">

                <table style='width: 100% !important;' id="grid"/>
                <div id="gridPager"/>

        </div>
        <div class="card-footer">
            <h:form id="create_employee_form" rendered="#{empty editEmployeeController.model}">
                <h:commandLink id="create_button" styleClass="btn btn-primary" >
                    <i class="fa fa-user-plus"
                       aria-hidden="true"/>&#xA0; #{employeeMsg['employee.table.col.create']}
                    <f:ajax listener="#{editEmployeeController.createNewEmployee()}" render="editor"/>
                </h:commandLink>
            </h:form>
        </div>
    </div>
    <script>
        $.jgrid.defaults.width = 780;
        $.jgrid.defaults.responsive = true;
        $.jgrid.defaults.styleUI = 'Bootstrap4';
        $.jgrid.defaults.iconSet = "Octicons";
    </script>
    <style>
        .ui-jqgrid
        {
            font-size:0.8rem
        }
    </style>
    <h:outputScript>
        //refreshAllEventListener('content');
        $(document).ready(function () {

        var grid = $('#grid');
        var pagerId = '#gridPager';

        grid.jqGrid({
        regional: '#{facesContext.viewRoot.locale.language}',
        url: 'http://localhost:8080/webapp/rest/EmployeeService/employees',
        mtype: "GET",
        //styleUI : 'Bootstrap4',
        //iconSet : 'fontAwesome',
        datatype: "json",
        minColWidth: 75,
        colModel: [
        { label: '#{employeeMsg['employee.table.col.details']}', name: 'id', key: true, width: 75 },
        { label: '#{employeeMsg['employee.table.col.firstName']}', name: 'firstName', width: 150 },
        { label: '#{employeeMsg['employee.table.col.lastName']}', name: 'lastName', width: 150 },
        { label: '#{employeeMsg['employee.table.col.salary']}', name: 'salary', width: 150 },
        { label:'#{employeeMsg['employee.table.col.birthDate']}', name: 'birthDate', width: 150 }
        ],
        viewrecords: true,
        height: 'auto',
        //width:'800',
        autoWidth: true,
        responsive: true,
        menubar: true,
        caption : 'Aktionen',
        loadonce: true,
        colMenu : true,
        shrinkToFit: true,
        rowNum: 8,
        altRows : true,
        pager: pagerId
        });

        //mygrid.setGridWidth(850);
        // activate the toolbar searching

/*        $('#jqGrid').jqGrid('filterToolbar',{
        stringResult: true,
        searchOnEnter: false,
        searchOperators : true
        });*/

        grid.jqGrid('navGrid',pagerId, {
        search: true, // show search button on the toolbar
        add: false,
        edit: false,
        del: false,
        refresh: true
        });


        grid.jqGrid('menubarAdd',  [
        {
        id : 'das',
        //cloasoncall : true,
        title : 'Sort by Category',
        click : function ( event) {
            grid.jqGrid('sortGrid','CategoryName');
        }
        },
        {
        divider : true,
        },
        {
        id : 'was',
        //cloasoncall : true,
        title : 'Toggle Visibility',
        click : function ( event) {
        var state = (this.p.gridstate === 'visible') ? 'hidden' : 'visible';
            grid.jqGrid('setGridState',state);
        }
        }
        ]);

        // workaround set width to 100%
        var newWidth = grid.closest(".ui-jqgrid").parent().width();
        grid.jqGrid("setGridWidth", newWidth, true);

        });
    </h:outputScript>
</ui:composition>